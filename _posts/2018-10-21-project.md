---
layout:       post
title:        "大数据平台架构"
subtitle:     "Big Data Platform Architecture"
date:         "2018-10-21"
header-img:   "img/post/bigdata.jpeg"
catalog:      true
tags:
    - hadoop
    - bigdata
---

## 1. 系统架构
一个完整的大数据平台包含多个不同子系统：数据采集系统、数据存储系统、数据计算系统以及集群系统。 而这些子系统又是由许多功能各异组件构成，其中不乏诸如Hadoop、Hive、ZooKeeper一类的明星项目。如今，Hadoop的项目结构不断发展，已经形成了一个完善而丰富的生态系统。因此，在实际生产当中被广泛的应用到大数据平台的架构上。Hadoop的项目结构如图1-1所示，项目中各组件的功能简介见表1-2 Hadoop项目组件功能简介表。

![hadoop2.0项目结构图][1]
<p align='center'><small>图 1-1 hadoop2.0项目结构图</small></p>
传统数据仓库的局限，转到Hadoop平台下

组件|主要功能
-|-
HDFS|分布式文件系统
MapReduce|分布式并行编程模型
YARN|资源管理和调度器
Tez|运行在YARN之上的下一代Hadoop查询处理框架
Hive|Hadoop上的数据仓库，支持SQL语句
HBase|Hadoop上的非关系模型的分布式数据库
Pig|一个基于Hadoop的大规模数据分析平台，提供类似SQL的查询语言Pig Latin
Sqoop|用于在Hadoop与传统数据库之间进行数据传递
Oozie|Hadoop上的工作流管理系统
Zookeeper|提供分布式协调一致性工作
Storm|流计算框架
Flume|高可用、高可靠的分布式海量日志采集、聚合和传输系统
Ambari|Hadoop快速部署工具，支持Apache Hadoop集群的供应、管理和控制
Kafka|一种高吞吐量的分布式发布订阅消息系统，可以处理消费者规模的网站中的所有动作流数据
Spark|类似于Hadoop MapReduce的通用并行编程框架

## 2. 数据采集系统
## 3. 数据存储系统
在这个数据爆炸的时代，每年全球产生的数据量都在被不断刷新。充分挖掘这些数据其中的价值也是企业在不断地追求的终极目标。但是要想对海量的数据进行挖掘，首先要考虑的就是海量数据的存储问题。想要存储大规模的数据依靠传统的数据存储系统是行不通的，必须要设计出全新的数据存储系统。分布式存储系统为大规模数据存储提供了一种安全、高可用、低成本的解决方案。我们主要通过对HDFS的学习来了解分布式文件系统的工作原理。
### 3.1 HDFS分布式文件系统
HDFS(Hadoop Distributed File System)是hadoop项目的两大核心组件之一，它的主要优势是能够兼容廉价的硬件设备，以简单的文件模型，支持流数据读写和大数据集，提高客户端读取效率。假如用户有一块1TB的数据需要读取，磁盘读取速度为200MB/S，则读取操作需要大约一个半小时才能完成。如果将1块磁盘中的数据分开存储到100块磁盘上，当用户读取时，它们并行运行，那么用户的读取操作就可以在不到1分钟的时间内完成。

一个HDFS群集由一个运行于master上的NameNode和多个运行于slave上的DataNode组成。NameNode负责管理文件系统的命名空间和客户端对文件系统的访问操作。

HDFS特殊的设计，在实现诸多优良特性的同时，也使得其自身具有一些局限性，如：不适合低延迟高实时性的数据访问、无法高效存储大量的小文件、不支持多用户及任意修改文件。

### 3.2 HDFS数据块
每个磁盘都有默认的数据块大小，这是磁盘进行数据读写的最小单位。构建于磁盘之上的文件系统通过磁盘的块来管理自身的块，所以文件系统块的大小是磁盘块的整数倍。文件系统块一般为4KB，而磁盘块一般为512B。HDFS中也有块的概念，但是大小远远大于普通文件系统的块，默认为64MB或128MB，以此来减少寻址开销。HDFS中一个文件被分为多个块，以块作为基本存储单位。采用抽象的块来存储可以带来以下几个明显的好处：

- **支持大规模文件存储**：文件以块为单位进行存储，一个大规模文件可以被拆分为若干个较小的文件块，不同的文件块可以被分发到不同的结点上，因此一个文件的大小不会受到单个结点存储容量的限制。
- **简化文件系统设计**：首先，大大简化了存储管理，因为文件块的大小是固定的，这样可以很容易计算出一个结点可以存储多少个文件块；其次，方便了元数据的管理，元数据不需要和文件块一起存储，元数据的管理可以由其他系统负责。
- **适合数据备份**：每个文件块都可以冗余存储到多个结点上，大大提高了系统的容错性和可用性。将每个块复制到少数几个物理上相互独立的机器上（默认为3个），以确保在块、磁盘或机器发生故障后数据不会丢失。如果发现一个块不可用，系统会从其他地方读取另一个复本，而这个过程对用户是透明的。一个因损坏或机器故障而丢失的块可以从其他候选地点复制到另一台可以正常运行的机器上，以保证复本的数量回到正常水平。同样，有些应用程序可能选择为一些常用的文件块设置更高的复本数量进而分散集群中的读取负载。

### 3.2 NameNode和DataNode
在HDFS中，名称结点（NameNode）负责管理分布式文件系统的命名空间（Namespace）
### 3.3 SecondaryNameNode
## 4. 数据计算系统
### 4.1 MapReduce分布式计算框架
### 4.2 JobTracker和TaskTracker
## 5. 集群管理系统

[1]: https://canhui.wang/img/big-data/4.png
